<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project ‚Äî Mohamed Ali Mabrouki</title>
  <meta name="description" content="Case study showcase from Mohamed Ali Mabrouki covering EC Type Approval, Euro 7 braking integration, and chassis programs.">
  <meta name="theme-color" content="#07090d">
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link id="canonical" rel="canonical" href="/">
  <link rel="alternate" hreflang="en" href="/project.html">
  <link rel="alternate" hreflang="fr" href="/project.html?lang=fr">
  <link rel="icon" href="/favicon.ico">
  <link rel="preload" as="font" href="assets/fonts/Inter-latin.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="image" type="image/avif" href="assets/optimized/mabrouki-headshot-640.avif" imagesrcset="assets/optimized/mabrouki-headshot-320.avif 320w, assets/optimized/mabrouki-headshot-640.avif 640w, assets/optimized/mabrouki-headshot-960.avif 960w">
  <link rel="stylesheet" href="styles.css">
  <meta property="og:title" content="">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="Mohamed Ali Mabrouki">
  <meta property="og:description" content="">
  <meta property="og:image" content="assets/og-image.jpg">
  <meta property="og:url" content="/project.html">
  <meta property="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="assets/og-image.jpg">
  <meta property="twitter:url" content="/project.html">
  <script>
    (function(){
      try{
        const stored = localStorage.getItem('theme');
        if(stored){
          document.documentElement.dataset.theme = stored;
        }else{
          const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
          document.documentElement.dataset.theme = prefersLight ? 'light' : 'dark';
        }
      }catch(err){}
    })();
  </script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Mohamed Ali Mabrouki","jobTitle":"Automotive Engineering Leader","url":"https://mohamedalimabrouki.com","image":"https://mohamedalimabrouki.com/assets/optimized/mabrouki-headshot-960.jpg","email":"mailto:contact@mohamedalimabrouki.com","telephone":"+216 25 910 020","sameAs":["https://www.linkedin.com/in/mohamedalimabrouki/"]}</script>
  <script type="application/ld+json" id="ld-breadcrumb">{}</script>
  <script defer data-domain="mohamedalimabrouki.com" src="https://plausible.io/js/script.js"></script>
</head>
<body>
  <a class="skip-link" href="#content" data-i18n-key="skip_to_content">Skip to main content</a>
  <header class="site-header" id="top">
    <div class="wrap header-bar">
      <a class="brand" href="index.html#top">
        <picture class="brand-avatar focus-img" style="--focus:50% 42%" data-src="assets/mabrouki-headshot.JPG">
          <source type="image/avif" srcset="assets/optimized/mabrouki-headshot-320.avif 320w, assets/optimized/mabrouki-headshot-640.avif 640w, assets/optimized/mabrouki-headshot-960.avif 960w" sizes="120px">
          <source type="image/webp" srcset="assets/optimized/mabrouki-headshot-320.webp 320w, assets/optimized/mabrouki-headshot-640.webp 640w, assets/optimized/mabrouki-headshot-960.webp 960w" sizes="120px">
          <source type="image/jpeg" srcset="assets/optimized/mabrouki-headshot-320.jpg 320w, assets/optimized/mabrouki-headshot-640.jpg 640w, assets/optimized/mabrouki-headshot-960.jpg 960w" sizes="120px">
          <img src="assets/mabrouki-headshot.JPG" alt="Portrait of Mohamed Ali Mabrouki" loading="eager" decoding="async">
        </picture>
        <div class="brand-meta">
          <p class="brand-label" data-i18n-key="brand_label">Automotive Engineering Leader</p>
          <h1 class="brand-name" data-i18n-key="brand_name">Mohamed Ali Mabrouki</h1>
          <p class="brand-sub" data-i18n-key="brand_subtitle">Homologation ¬∑ Braking ¬∑ Chassis Launch</p>
        </div>
      </a>
      <button id="menuToggle" class="menu-toggle chip" type="button" aria-expanded="false" aria-controls="primaryNav" aria-label="Toggle navigation">
        <span aria-hidden="true">‚ò∞</span>
      </button>
      <nav id="primaryNav" class="main-nav" aria-label="Primary">
        <a href="index.html#about" data-i18n-key="nav_about">About</a>
        <a href="index.html#expertise" data-i18n-key="nav_expertise">Expertise</a>
        <a href="index.html#projects" data-i18n-key="nav_projects">Projects</a>
        <a href="index.html#experience" data-i18n-key="nav_experience">Experience</a>
        <a href="index.html#contact" data-i18n-key="nav_contact">Contact</a>
        <div class="nav-actions">
          <button id="themeToggle" class="chip" aria-pressed="false" aria-label="Toggle theme">üåì</button>
          <button id="langToggle" class="chip" aria-pressed="false" aria-label="Switch language">FR</button>
        </div>
      </nav>
    </div>
  </header>

  <main id="content">
    <section class="section">
      <div class="wrap">
        <a class="link-cta" href="index.html#projects" data-i18n-key="project_back">‚Üê Back to projects</a>
        <article id="project-article" class="card project-detail reveal">
          <div class="project-header">
            <p class="muted" id="p-tags"></p>
            <h1 id="p-title">Project</h1>
            <p id="p-summary" class="lead"></p>
          </div>
          <div id="p-gallery" class="project-gallery grid" style="margin-top:16px"></div>
          <div class="project-columns">
            <section>
              <h3 data-i18n-key="project_highlights">Key Highlights</h3>
              <ul id="p-highlights"></ul>
            </section>
            <section>
              <h3 data-i18n-key="project_kpis">KPIs</h3>
              <ul id="p-kpis"></ul>
            </section>
          </div>
          <section id="p-details"></section>
        </article>
        <div class="project-actions cta-group">
          <button class="btn" type="button" onclick="window.print()" data-i18n-key="project_download_pdf">Download PDF</button>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrap footer-grid">
      <p data-i18n-key="footer_note">Built for clarity, compliance, and launch-readiness.</p>
      <a class="chip ghost" href="#top" data-i18n-key="footer_back_to_top">Back to top ‚Üë</a>
    </div>
  </footer>

  <script src="script.js" defer></script>
  <script>
    window.addEventListener('DOMContentLoaded', async () => {
      const params = new URLSearchParams(location.search);
      const slug = params.get('p');
      const [cfg, data] = await Promise.all([
        loadJSON('content/config.json'),
        loadJSON('content/projects.json')
      ]);
      if(!data || !Array.isArray(data) || !data.length) return;
      const project = data.find(x => x.slug === slug) || data[0];
      window.__currentProject = project;

      const currentLang = state.lang || 'en';
      const localize = (obj, key) => {
        if(!obj) return undefined;
        if(currentLang === 'fr' && obj[`${key}_fr`]) return obj[`${key}_fr`];
        return obj[key];
      };

      const title = localize(project, 'title') || project.title;
      const summary =
        localize(project.details, 'overview') ||
        localize(project, 'summary') ||
        project.summary ||
        '';
      const domain = ((cfg && (cfg.portfolio || cfg.website)) || location.origin).replace(/\/$/, '');
      const canonicalUrl = `${domain}/project.html?p=${encodeURIComponent(project.slug)}${currentLang === 'fr' ? '&lang=fr' : ''}`;
      document.title = `${title} ‚Äî Mohamed Ali Mabrouki`;
      const canonicalEl = document.getElementById('canonical');
      if(canonicalEl){
        canonicalEl.setAttribute('href', canonicalUrl);
      }
      const alternates = document.querySelectorAll('link[rel="alternate"]');
      alternates.forEach(link => {
        if(link.getAttribute('hreflang') === 'fr'){
          link.setAttribute('href', `${domain}/project.html?p=${encodeURIComponent(project.slug)}&lang=fr`);
        }else if(link.getAttribute('hreflang') === 'en'){
          link.setAttribute('href', `${domain}/project.html?p=${encodeURIComponent(project.slug)}`);
        }
      });
      const desc = summary || 'Automotive engineering project';
      const setMeta = (sel, val) => {
        const el = document.querySelector(sel);
        if(el) el.setAttribute('content', val);
      };
      setMeta('meta[name="description"]', desc);
      setMeta('meta[property="og:title"]', document.title);
      setMeta('meta[property="og:description"]', desc);
      setMeta('meta[property="og:url"]', canonicalUrl);
      setMeta('meta[name="twitter:title"]', document.title);
      setMeta('meta[name="twitter:description"]', desc);
      setMeta('meta[property="twitter:url"]', canonicalUrl);

      document.getElementById('p-title').textContent = title;
      document.getElementById('p-summary').textContent = desc;
      const tagLine = (project.tags || []).join(' ‚Ä¢ ');
      document.getElementById('p-tags').textContent = tagLine;

      const galleryEl = document.getElementById('p-gallery');
      const gallery = Array.isArray(project.details?.gallery) && project.details.gallery.length
        ? project.details.gallery
        : [project.image];
      const focus = localize(project.details, 'focus') || project.focus;
      const heroImage = gallery[0] || project.image;
      const absoluteImage = `${domain}/${heroImage.replace(/^\//, '')}`;
      setMeta('meta[property="og:image"]', absoluteImage);
      setMeta('meta[name="twitter:image"]', absoluteImage);
      galleryEl.innerHTML = gallery
        .map((img, index) => imgBlock(img, {
          alt: `${title} visual ${index + 1}`,
          context: 'gallery',
          focus,
          slug: project.slug,
          index,
          sizes: '(min-width: 960px) 600px, (min-width: 720px) 48vw, 92vw'
        }))
        .join('');
      refreshImageEnhancements(galleryEl);

      const highlights =
        localize(project.details, 'highlights') ||
        localize(project, 'bullets') ||
        project.details?.highlights ||
        project.bullets ||
        [];
      document.getElementById('p-highlights').innerHTML = highlights
        .map(item => `<li>${escapeHTML(item)}</li>`)
        .join('');

      const kpis =
        localize(project.details, 'kpis') ||
        project.details?.kpis ||
        [];
      const kpiContainer = document.getElementById('p-kpis');
      if(kpis.length){
        kpiContainer.innerHTML = kpis.map(item => `<li>${escapeHTML(item)}</li>`).join('');
      }else{
        const fallback = (state.i18n && state.i18n.ui && state.i18n.ui.project_kpis_fallback) || 'KPIs available on request.';
        kpiContainer.innerHTML = `<li>${escapeHTML(fallback)}</li>`;
      }

      const extra =
        localize(project.details, 'extra') ||
        project.details?.extra ||
        [];
      const detailSection = document.getElementById('p-details');
      if(extra.length){
        const extraHeading = (state.i18n && state.i18n.ui && state.i18n.ui.project_additional) || 'Additional Notes';
        detailSection.innerHTML = `<h3 data-i18n-key="project_additional">${escapeHTML(extraHeading)}</h3><ul>${extra.map(item => `<li>${escapeHTML(item)}</li>`).join('')}</ul>`;
      }

      if(state.i18n && state.i18n.ui){
        setTranslations(state.i18n, state.lang);
      }

      refreshImageEnhancements(document);
      trackEvent('Project View', { slug: project.slug });

      const breadcrumb = {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": domain + '/'
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Projects",
            "item": domain + '/#projects'
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": title,
            "item": canonicalUrl
          }
        ]
      };
      const ld = document.getElementById('ld-breadcrumb');
      if(ld){
        ld.textContent = JSON.stringify(breadcrumb);
      }
    });
  </script>
</body>
</html>
